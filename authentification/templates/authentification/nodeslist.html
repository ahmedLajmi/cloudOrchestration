{% extends 'base.html' %}
{% load staticfiles %}

{% block mytitle %} NodesList {% endblock %}

{% block mylink %}
<link rel="stylesheet" href="{% static 'css/style_graph.css' %}">
{% endblock %}

{% block mybody%}
    <div id="header" class="header">
       <div class="container">

          <button class="btn btn-lg btn-primary"  onclick="location.href = '{% url 'authentification:node-add' %}';"><i class="fa fa-sign-in" ></i>  Add a node  </button>
          <div class="row">
             <h1> hello nodes are</h1>
             {% if all_nodes %}
             <ul>
                {% for node in all_nodes %}
                <li><a href="{% url 'authentification:detail' node.id %}">{{node.name }}</a></li>
                {% endfor %}
             </ul>
             {% else %}
             <h1>No nodes </h1>
             {% endif %}
             <div class="albums-container container-fluid">
                <!-- Albums -->
                <div class="row">
                   <div class="col-sm-12">
                      <!-- <h3>{{ user.username }}'s Albums</h3> -->
                   </div>
                   {% if all_nodes %}
                   {% for node in all_nodes %}
                   <div class="col-sm-4 col-lg-2">
                      <div class="thumbnail">

                         <a href="{% url 'authentification:detail' node.id %}">
                            <img src="{{ node.photo.url }}" class="img-responsive">  <!-- {{ user.photo.url }} -->
                         </a>
                         <div class="caption">
                            <h2>{{ node.name }}</h2>
                            <h4>{{ node.typen }}</h4>
                            <!-- View Details -->
                            <a href="{% url 'authentification:detail' node.id  %}" class="btn btn-primary btn-sm" role="button">View Details</a>
                            <!-- Delete Album -->
                            
                            <form action="{% url 'authentification:node-update' node.id %}" method="get" style="display: inline;">
                               {% csrf_token %}
                               <input type="hidden" name="noe_id" value="{{ node.id }}"  title="Update"/>
                               <button type="submit" class="btn btn-default btn-sm" title="Update">
                               <span class="fa fa-pencil-square-o" aria-hidden="true"></span>
                               </button>
                            </form>

                            <form action="{% url 'authentification:node-delete' node.id %}" method="post" style="display: inline;">
                               {% csrf_token %}
                               <input type="hidden" name="album_id" value="{{ node.id }}"  title="Delete"/>
                               <button type="submit" class="btn btn-default btn-sm"  title="Delete">
                               <span class="glyphicon glyphicon-trash"></span>
                               </button>
                            </form>

                         </div>
                      </div>
                   </div>
                   {% endfor %}
                   {% else %}
                   <div class="col-sm-12">
                      <br>
                      <a href="{% url 'authentification:login'  %}">
                      <button type="button" class="btn btn-success">
                      <span class="glyphicon glyphicon-plus"></span>&nbsp; Add an Album
                      </button>
                      </a>
                   </div>
                   {% endif %}
                </div>
             </div>
          </div>
       </div>
    </div>
{% endblock %}