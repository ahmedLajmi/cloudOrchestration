{% extends 'base.html' %}
{% load staticfiles %}
{% block mytitle %} MyWorkspace {% endblock %}
{% block mylink %}
	<link rel="stylesheet" href="{% static 'css/stylew.css' %}">
{% endblock %}

{% block mybody%}
	{% if request.user.get_username %}
		<div id="header" class="header">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12 ban  wow zoomIn"  data-wow-delay="1s">
						<div class="">
							<h1>Welcome, {{ request.user.get_username }} </h1>
							<br><br><br>
						</div>	
						<div>
							<div class="col-lg-6 col-md-6 wow fadeInLeft" data-wow-delay="1.4s">
								<button class="btn btn-lg btn-primary"  data-toggle="modal" data-target="#myselectionModal"><i class="fa fa-file-archive-o" aria-hidden="true"></i> <span > &nbsp; Insert file &nbsp; </span> </button>
								<p> You can insert a yaml file and generate its graph containing its nodes and relationships </p>
							</div>
							<div class="col-lg-6 col-md-6 wow fadeInLeft" data-wow-delay="0.8s">
								<button class="btn btn-lg btn-success" onClick="$('#fileselect').show()"><i class="fa fa-sitemap" aria-hidden="true"></i>  Create template </button>
								<p>You can create your own template with new services and cutsomized nodes. </p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Modal -->
		<div class="modal fade select" id="myselectionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					</div>
					<div class="modal-body"> 
						<div id="fileselection"   class="col-md-8 col-md-offset-2">
							<form method="POST" action="{% url 'grapheGenerator:postForm' %}" enctype="multipart/form-data">
								{% csrf_token %}
								<!-- COMPONENT START -->
								<h3>TOSCA Definition File Selection</h3>
								<div class="form-group">
									<div class="input-group input-file" name="toscaDefinition">
										<input type="text" class="form-control" placeholder='Choose a TOSCA Definition file...' />
										<span class="input-group-btn">
											<button class="btn btn-default btn-choose" type="button">Choose</button>
										</span>
									</div>
								</div>
								<h3>Template File Selection</h3>
								<div class="form-group">
									<div class="input-group input-file" name="toscaTemplate">
										<input type="text" class="form-control" placeholder='Choose a Template file...' />      
										<span class="input-group-btn">
											<button class="btn btn-default btn-choose" type="button">Choose</button>
										</span>
									</div>
								</div>
								<!-- COMPONENT END -->
								<center> 
									<div class="form-group">
										<button type="submit" class="btn btn-primary " >Submit</button>
										<button type="reset" class="btn btn-danger ">Reset</button>
									</div> 
								</center>
								<br><br><br>
							</form>
						</div>
					</div>
					<div class="modal-footer"> </div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			function bs_input_file() {
				$(".input-file").before( 
					function() {
						if ( ! $(this).prev().hasClass('input-ghost') ) {
							var element = $("<input type='file' accept='.yaml,.yml' class='input-ghost' style='visibility:hidden; height:0'>");
							element.attr("name",$(this).attr("name"));
							element.change(function(){
								element.next(element).find('input').val((element.val()).split('\\').pop());
							});
							$(this).find("button.btn-choose").click(function(){
								element.click();
							});
							$(this).find("button.btn-reset").click(function(){
								element.val(null);
								$(this).parents(".input-file").find('input').val('');
							});
							$(this).find('input').css("cursor","pointer");
							$(this).find('input').mousedown(function() {
								$(this).parents('.input-file').prev().click();
								return false;
							});
							return element;
						}
					}
				);
			}
			$(function() {
				bs_input_file();
			});
			function myFunction() {
				var x = document.getElementById("myButn");
				var y = document.getElementById("Fichier1");
				var z = document.getElementById("Fichier2");
				if ( (y.value == "") || (z.value == ""))
					alert('You have to select both files!');

			}
		</script>
	{% endif %}
{% endblock %}

